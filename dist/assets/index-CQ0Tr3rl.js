import{C as e,D as t,E as n,F as r,H as i,L as a,M as o,O as s,S as c,T as l,U as u,V as d,_ as f,a as p,b as m,c as h,d as g,f as _,i as v,j as y,l as b,n as x,o as S,p as C,r as w,s as T,t as E,u as D,v as O,w as k,x as ee}from"./vue-hC_XqLZg.js";import{a as A,c as te,i as ne,l as re,n as j,o as ie,r as ae,s as oe,t as M,u as se}from"./deps-BaYjKpOC.js";import{ai as N,ei as ce,ii as P,ni as le,ri as ue,ti as de}from"./monaco-editor-jftja0nV.js";import{n as fe,r as pe,t as me}from"./shiki-BdLOo9Pm.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();const F=te();function he(){return{automaticLayout:!0,theme:F.value?`vs-dark`:`vs-light`,fontFamily:`"Cascadia Code", "Jetbrains Mono", "Fira Code", "Menlo", "Consolas", monospace`,tabSize:2,minimap:{enabled:!1}}}var I=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},ge={},_e={flex:`~ col center`,"h-full":``,"w-full":``,gap2:``};function ve(e,t){return m(),D(`div`,_e,[...t[0]||=[T(`div`,{"i-ri:loader-2-line":``,"animate-spin":``,"text-4xl":``},null,-1),T(`span`,{"text-lg":``},`Loading...`,-1)]])}var ye=I(ge,[[`render`,ve]]),be=C({__name:`CodeEditor`,props:f({language:{default:()=>`plaintext`},options:{default:()=>({})},model:{},readonly:{type:Boolean}},{modelValue:{default:``},modelModifiers:{}}),emits:[`update:modelValue`],setup(t,{expose:n}){let i=e(t,`modelValue`),s=t,c=r(!0),u=a(),d=k(`editorElement`),f,p=S(()=>({...he(),fontSize:13,fontLigatures:!0,readOnly:s.readonly,...s.options}));l(p,()=>f?.updateOptions(p.value)),l(i,()=>{g.value.getValue()!==i.value&&g.value.setValue(i.value)});let g=re(()=>[s.model,s.language],()=>s.model||o(P.createModel(i.value,s.language)));return l(g,()=>{f?.setModel(g.value),i.value=g.value.getValue()}),l(d,(e,t)=>{!e||t||(f=P.create(e,p.value),u.value=f,f.layout(),f.setModel(g.value),f.onDidChangeModelContent(()=>{i.value=f.getValue()}),c.value=!1)}),n({$editor:u}),(e,t)=>(m(),D(`div`,{ref_key:`editorElement`,ref:d},[c.value?(m(),h(ye,{key:0})):b(``,!0)],512))}});function L(e,t){let{uri:n,model:r}=R(e,t);return{filename:e,code:t,uri:n,model:r,rename(e){this.filename=e;let{uri:t,model:n}=R(e,this.code);this.uri=t,this.model.dispose(),this.model=n},dispose(){this.model.dispose()}}}function R(e,t){let n=o(ue.file(e)),r=e.endsWith(`.json`)?`json`:`typescript`,i=P.getModel(n);if(i){if(i.getLanguageId()===r)return i.setValue(t),{uri:n,model:i};i.dispose()}return{uri:n,model:o(P.createModel(t,r,n))}}function xe(e){let t=M(ne(j(e),{level:9}),!0);return btoa(t)}function Se(e){let t=atob(e);return t.startsWith(`xÃš`)?M(ae(j(t,!0))):decodeURIComponent(escape(t))}const z=()=>new Map([[`main.ts`,L(`main.ts`,`const x: number = 1`)]]),B=r(z()),Ce=S(()=>Array.from(B.value.keys())),V=r(`main.ts`),H=r({}),U=r(`main.jsx`),W=r(!1),G=r(0),K=r(!1),q=r(!1),J=se(S(()=>K.value||!q.value),100);function Y(){return Array.from(B.value.values()).map(e=>[e.filename,e.code])}var X=`tsgo:state`,Z=Se(location.hash.slice(1)),Q=Z&&JSON.parse(Z);if(!Q){let e=localStorage.getItem(X);e&&(Q=JSON.parse(e))}if(Q)try{B.value=new Map((Q?.f||[]).map(([e,t])=>[e,L(e,t)])),B.value.size===0&&(B.value=new Map(z())),V.value=B.value.keys().next().value}catch{}const $=S(()=>JSON.stringify({f:Y()}));n(()=>{location.hash=xe($.value),localStorage.setItem(X,$.value)});var we={flex:``,"self-end":``,gap1:``,border:``,"rounded-full":``},Te=C({__name:`NavBar`,setup(e){function t(){globalThis.confirm(`Are you sure you want to reset all files to their default values?`)&&(P.getModels().forEach(e=>{e.uri.authority!==`model`&&e.dispose()}),B.value=z())}return(e,n)=>(m(),D(`div`,we,[T(`button`,{title:`Start Over`,"nav-button":``,onClick:t},[...n[1]||=[T(`div`,{"i-ri:refresh-line":``,"text-2xl":``},null,-1)]]),T(`button`,{"nav-button":``,onClick:n[0]||=e=>F.value=!d(F)},[...n[2]||=[T(`div`,{"dark:i-ri:moon-line":``,"i-ri:sun-line":``,"text-2xl":``},null,-1)]]),n[3]||=T(`a`,{"nav-button":``,href:`https://github.com/sxzz/typescript-go-playground`,target:`_blank`,rel:`noopener`},[T(`div`,{"i-ri:github-fill":``,"text-2xl":``})],-1),n[4]||=T(`a`,{href:`https://github.com/sponsors/sxzz`,target:`_blank`,flex:`~ center`,title:`Sponsor`,rel:`noopener`,group:``,"nav-button":``},[T(`div`,{"i-ri:heart-3-line":``,"group-hover:i-ri:heart-3-fill":``,"text-2xl":``,"text-pink-400":``,"group-hover:text-pink-400":``})],-1)]))}}),Ee={},De={gap:`1.2`,flex:``,"items-center":``,py5:``,"text-hex-888e":``};function Oe(e,t){return m(),D(`div`,De,[...t[0]||=[g(` Made with `,-1),T(`div`,{"i-ri:heart-3-line":``,"text-pink":``},null,-1),g(` by `,-1),T(`a`,{href:`https://github.com/sxzz`,target:`_blank`,rel:`noopener`,hover:`underline`},` Kevin Deng `,-1),T(`a`,{href:`https://github.com/sxzz/typescript-go-playground`,target:`_blank`,rel:`noopener`,op50:``,"hover:op100":``},[T(`div`,{"i-ri-github-fill":``,"text-lg":``})],-1),g(` and modified by rictic to use a custom WASM build for speed. `,-1)]])}var ke=I(Ee,[[`render`,Oe]]),Ae={flex:`~ col`,gap2:``},je={flex:``,"items-center":``},Me=[`onClick`,`onDblclick`],Ne=[`onKeydown`,`onBlur`],Pe=[`onClick`],Fe=C({__name:`Tabs`,props:f({tabs:{},readonly:{type:Boolean}},{modelValue:{default(e){return e.tabs[0]}},modelModifiers:{}}),emits:f([`addTab`,`renameTab`,`removeTab`],[`update:modelValue`]),setup(t,{emit:n}){let a=n,o=e(t,`modelValue`);l([o,()=>t.tabs],()=>{t.tabs.length&&!t.tabs.includes(o.value)&&(o.value=t.tabs[0])},{deep:!0});let d=r(),f=r(``),h=k(`rename-input`),g=k(`tabsRef`);function _(){let e=`untitled`,n=1,r=e;for(;t.tabs.includes(r);)r=`${e}-${n++}`;a(`addTab`,r),o.value=r,y(r)}async function y(e){d.value=e,f.value=e,await O(),h.value?.[0]?.focus(),h.value?.[0]?.select()}function S(e){let n=f.value.trim();n&&n!==e&&!t.tabs.includes(n)&&(a(`renameTab`,e,n),o.value===e&&(o.value=n)),d.value=void 0}function C(){d.value=void 0}function E(e){t.tabs.length<=1||(a(`removeTab`,e),o.value===e&&(o.value=t.tabs[0]))}function A(e){let t=g.value,n=Math.abs(e.deltaX)>=Math.abs(e.deltaY)?e.deltaX:e.deltaY;t.scrollTo({left:t.scrollLeft+n})}return(e,n)=>(m(),D(`div`,Ae,[T(`div`,je,[T(`div`,{ref_key:`tabsRef`,ref:g,flex:``,"flex-nowrap":``,"overflow-x-auto":``,class:`tabs`,onWheel:v(A,[`prevent`])},[(m(!0),D(p,null,ee(t.tabs,r=>(m(),D(`div`,{key:r,"border-b":`~ 2`,group:``,flex:``,"cursor-pointer":``,"items-center":``,gap1:``,"rounded-t":``,py1:``,pl2:``,class:i([o.value===r&&`border-b-blue-500`,d.value===r&&`bg-gray:10`,t.readonly&&`pr2`]),onClick:e=>o.value=r,onDblclick:e=>!t.readonly&&y(r)},[c(e.$slots,`tab-prefix`,{value:r}),d.value===r?s((m(),D(`input`,{key:0,ref_for:!0,ref:`rename-input`,"onUpdate:modelValue":n[0]||=e=>f.value=e,style:{"field-sizing":`content`},"rounded-none":``,"border-none":``,"bg-transparent":``,p0:``,"text-sm":``,"font-mono":``,"outline-none":``,spellcheck:`false`,onKeydown:[w(v(e=>S(r),[`prevent`]),[`enter`]),n[1]||=w(v(e=>C(),[`prevent`]),[`esc`])],onBlur:e=>S(r)},null,40,Ne)),[[x,f.value]]):(m(),D(`span`,{key:1,class:i(o.value===r?`text-blue-500`:`op70`),"whitespace-nowrap":``,"text-sm":``,"font-mono":``},u(r),3)),!t.readonly&&t.tabs.length>1?(m(),D(`button`,{key:2,title:`Remove`,p:`0.5`,class:i(o.value===r&&`op60`),rounded:``,op0:``,"transition-300":``,"transition-opacity":``,"hover:bg-gray:30":``,"group-hover:opacity-60":``,onClick:v(e=>E(r),[`stop`])},[...n[2]||=[T(`div`,{"i-ri:close-line":``},null,-1)]],10,Pe)):b(``,!0)],42,Me))),128))],544),t.readonly?b(``,!0):(m(),D(`button`,{key:0,ml3:``,rounded:``,p1:``,"hover:bg-gray:30":``,onClick:_},[...n[3]||=[T(`div`,{"i-ri:add-fill":``,"text-lg":``},null,-1)]]))]),c(e.$slots,`default`,{value:o.value})]))}});function Ie(e){return new Worker(`/assets/worker-DDSJwmr8.js`,{name:e?.name})}var Le={key:0,"self-end":``,"text-sm":``,op70:``},Re={flex:`~ col`,"h-full":``,"min-w-0":``,"w-full":``,"flex-1":``,gap2:``},ze={"min-h-0":``,"min-w-0":``,"flex-1":``},Be={flex:`~ col`,"h-full":``,"min-w-0":``,"w-full":``,"flex-1":``,"items-center":``,gap2:``},Ve={key:0,flex:`~ col`,"h-full":``,"w-full":``,"items-center":``,"justify-center":``,gap3:``},He={group:``,relative:``,"h-full":``,"min-h-0":``,"w-full":``},Ue=[`textContent`],We=[`innerHTML`],Ge={key:2,"self-end":``,op70:``},Ke=C({__name:`App`,setup(e){let n=ie(),a=new Ie,o=A({},{post:e=>a.postMessage(e),on:e=>a.addEventListener(`message`,({data:t})=>e(t))}),s=!1,c=r(!1),f=null;l(B,()=>{W.value?s=!0:v()},{deep:!0,immediate:!0});async function v(){if(K.value)return;K.value=!0,await o.init(),K.value=!1,q.value=!0,W.value=!0,s=!1,f=setTimeout(()=>{W.value&&(c.value=!0)},300);let e=await o.compile(``,Object.fromEntries(Y()));W.value=!1,c.value=!1,f&&=(clearTimeout(f),null),H.value=e.output,G.value=e.time,U.value=Object.keys(e.output)[0],s&&v()}function x(e){return e?me.codeToHtml(e.replace(n,``),{lang:`js`,theme:F.value?pe.name:fe.name}):``}let{copy:S,copied:C}=oe();function w(){U.value&&S(H.value[U.value]||``)}function E(e){B.value.set(e,L(e,``))}function O(e,t){B.value=new Map(Array.from(B.value.values()).map(n=>n.filename===e?(n.rename(t),[t,n]):[n.filename,n]))}function k(e){B.value.get(e)?.dispose(),B.value.delete(e)}function ee(e,t){B.value.get(e).code=t}return(e,r)=>(m(),D(`div`,{flex:`~ col`,relative:``,"h-100dvh":``,"items-center":``,px10:``,pt4:``,class:i(!d(J)&&`overflow-y-scroll`)},[_(Te,{absolute:``}),T(`div`,{flex:`~ col`,gap2:``,py12:``,"transition-all":``,class:i(d(J)&&`animate-pulse translate-y-35dvh`)},[r[2]||=T(`h1`,{flex:`~ wrap`,"items-center":``,gap2:``,"text-3xl":``,"font-bold":``},[T(`div`,{"i-catppuccin:typescript-test":``}),T(`a`,{href:`https://github.com/microsoft/typescript-go`,target:`_blank`,class:`text-#8aadf4`},`TypeScript Go`),g(` Playground `)],-1),d(J)?(m(),D(`div`,Le,`Loading WASM...`)):b(``,!0)],2),T(`div`,{class:i(d(J)&&`op0 invisible`),"min-h-0":``,"w-full":``,flex:``,"flex-1":``,"flex-col":``,"items-center":``,gap4:``,"transition-opacity":``,"duration-500":``,"md:flex-row":``},[T(`div`,Re,[_(Fe,{modelValue:d(V),"onUpdate:modelValue":r[0]||=e=>y(V)?V.value=e:null,tabs:d(Ce),"h-full":``,"min-h-0":``,"min-w-0":``,"w-full":``,"flex-1":``,onAddTab:E,onRenameTab:O,onRemoveTab:k},{default:t(({value:e})=>[T(`div`,ze,[_(be,{"model-value":d(B).get(e).code,model:d(B).get(e).model,uri:d(B).get(e).uri,input:``,"h-full":``,"min-h-0":``,"w-full":``,"onUpdate:modelValue":t=>ee(e,t)},null,8,[`model-value`,`model`,`uri`,`onUpdate:modelValue`])])]),_:1},8,[`modelValue`,`tabs`])]),T(`div`,Be,[c.value?(m(),D(`div`,Ve,[...r[3]||=[T(`div`,{"i-logos:typescript-icon-round":``,"animate-bounce":``,"text-6xl":``},null,-1),g(` Compiling... `,-1)]])):(m(),h(Fe,{key:1,modelValue:d(U),"onUpdate:modelValue":r[1]||=e=>y(U)?U.value=e:null,tabs:Object.keys(d(H)),readonly:``,"h-full":``,"min-h-0":``,"w-full":``},{default:t(()=>[T(`div`,He,[d(U)?(m(),D(p,{key:0},[d(U).startsWith(`<`)?(m(),D(`div`,{key:0,class:i([`output`,{"text-red":d(U)===`<stderr>`}]),textContent:u(d(H)[d(U)]?.replace(d(n),``))},null,10,Ue)):(m(),D(`div`,{key:1,class:`output`,innerHTML:x(d(H)[d(U)])},null,8,We))],64)):b(``,!0),T(`button`,{absolute:``,"right-4":``,"top-4":``,"rounded-lg":``,p2:``,op0:``,"transition-opacity":``,"hover:bg-gray":``,"hover:bg-opacity-10":``,"group-hover:opacity-100":``,onClick:w},[T(`div`,{class:i(d(C)?`i-ri:check-line text-green`:`i-ri:file-copy-line`)},null,2)])])]),_:1},8,[`modelValue`,`tabs`])),d(G)&&!c.value?(m(),D(`div`,Ge,u(Math.round(d(G)))+` ms `,1)):b(``,!0)])],2),_(ke)],2))}});N.typescript.typescriptDefaults.setCompilerOptions({target:N.typescript.ScriptTarget.ESNext,module:N.typescript.ModuleKind.ESNext,allowNonTsExtensions:!0,allowImportingTsExtensions:!0,moduleResolution:N.typescript.ModuleResolutionKind.NodeJs,noEmit:!0,esModuleInterop:!0,jsx:N.typescript.JsxEmit.Preserve,resolveJsonModule:!0}),N.json.jsonDefaults.setDiagnosticsOptions({schemaValidation:`warning`,enableSchemaRequest:!0,schemas:[{fileMatch:[`tsconfig.json`],uri:`https://www.schemastore.org/tsconfig.json`}]}),P.registerEditorOpener({openCodeEditor(e,t){if(t.scheme!==`file`||t.path[0]!==`/`)return!1;let n=t.path.slice(1);return B.value.has(n)?(V.value=n,!0):!1}}),globalThis.MonacoEnvironment={getWorker(e,t){return t===`json`?new de:t===`typescript`||t===`javascript`?new ce:new le}},E(Ke).mount(`#app`);